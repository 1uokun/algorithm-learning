# 二叉堆

> 堆数据结构，也叫作二叉堆
> **它能高效、快速地找出最大值和最小值**，常被应用于**优先队列**
> 也被用于著名的**堆排序算法**中。

## 二叉堆数据结构
二叉堆是一种特殊的二叉树，有以下两个特性。

 - 它是一棵*完全二叉树*，表示树的每一层都有左侧和右侧子节点（除了最后一层的叶节点），
   并且最后一层的叶节点尽可能是左侧子节点，这叫做**结构特性**。（有点像平衡二叉树）
 - 二叉堆不是最小堆就是最大堆。
   所有的节点都大于等于（最大堆）或小于等于（最小堆）每个它的子节点。
   这叫作**堆特性**。
   
## 堆排序算法 
 1. 用数组创建一个最大堆用作源数据。（`给的数组是无序的，需要加工成我们需要的堆数组`）
 2. 在创建最大堆后，最大的值会被存储在堆的第一个位置。
    我们要将它替换为堆的最后一个值，将堆的大小减1.
 3. 最后，我们将堆的根节点下移并重复步骤2直到堆的大小为1
 
## 实现（以数组的形式存储值）
尽管二叉堆是二叉树，但并不一定是二叉搜索树（BST）。
在二叉堆中，每个子节点都要大于等于父节点（最小堆）或小于等于父节点（最大堆）。
然而在二叉搜索树中，左侧子节点总是比父节点小，右侧子节点总是比父节点大。

### 二叉树的数组表示
二叉树有两种表示方式。
第一种是使用一个动态的表示方式，也就是指针（用节点表示），
第二种是使用一个数组，通过索引值检索父节点、左侧和右侧子节点的值。
对于给定位置index的节点：
 - 它的左侧子节点的位置是 2*index+1 （如果位置可用）
 - 它的右侧子节点的位置是 2*index+2 （如果位置可用）
 - 它的父节点位置是 index/2 (如果位置可用)
 
#### insert方法
插入一个值后，会和它当前的父节点作对比
如果小于，则与父节点对换，然后再和新的父节点作对比。
重复上述过程

对换方法`swap`：
```javascript
function swap(array,a,b){
    const temp = array[a]
    array[a] = array[b];
    array[b] = temp;
}

//es6
[a,b] = [b,a]
```

上移操作`siftUp`:
```javascript
//用循环不要用递归
function siftUp(index){

}
```

所以`insert`:
```javascript
function insert(value){
    this.heap.push(value);
    this.siftUp(this.heap.length-1)
}
```